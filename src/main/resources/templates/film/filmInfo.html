<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns="http://www.w3.org/1999/html"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>INFO Película</title>
    <link rel="stylesheet" type="text/css" href="static/css/infoStyle" th:href="@{/css/infoStyle.css}">
    <link rel="stylesheet" type="text/css" href="static/css/layoutStyle.css" th:href="@{/css/layoutStyle.css}">

</head>
<body>

<div layout:fragment="content">

    <main>
        <form th:action="@{'/'}" th:object="${film}" method="post">
        <!-- <div class="container"> -->
        <div class="movie-card">
            <div class="poster-wrapper">
                <div class="poster">
                    <img th:src="${film.cover}" alt="poster"/>
                </div>
            </div>
            <!-- end poster-wrapper -->
            <div class="movie-info">
                <div class="header-section">
                    <h2 th:text="${film.title}"></h2>
                    <p>
                        <span th:each="genre: ${film.genres}">
                            <i th:text="${genre.name} + ' / '"></i>
                        </span><i th:text="${film.year} + ' / ' + ${film.duration} + 'min'"></i>
                    </p>

                    <div class="extra">
                        <div class="ratings"><p> &#9733; &#9733; &#9733; &#9733; &#9734; 8.0</p></div>

                    </div>
                </div>





               <div>
                    <h3>PLATAFORMAS</h3>
                    <a th:each="num: ${film.platforms}">

                        <a th:if="${num.toString() == 'Netflix'}" href="https://www.netflix.com/es/browse/genre/839338" target="_blank">
                            <span><img class="platform" th:src="@{/img/platform/netflix.png}"></span></a>

                        <a th:if="${num.toString() == 'HBO Max'}" href="https://www.hbomax.com/" target="_blank">
                            <span><img  class="platform" th:src="@{/img/platform/hbo.png}"></span></a>

                        <a th:if="${num.toString() == 'Prime Video'}" href="https://www.primevideo.com/" target="_blank">
                            <span><img  class="platform" th:src="@{/img/platform/prime.png}"></span></a>

                        <a th:if="${num.toString() == 'Disney+'}" href="https://www.disneyplus.com/" target="_blank">
                            <span><img  class="platform" th:src="@{/img/platform/disney.png}"></span></a>
                    </a>


                </div>

                    <div class="cast-section">
                        <h3>THE CAST</h3>
                        <div th:text="${film.casting}">

                        </div>
                    </div>

                    <div class="synopsis-section">
                        <h3>SYNOPSIS</h3>
                        <span class="more" th:text="${film.synopsis}"></span>
                    </div>
                <div class="gallery-section">
                    <h3>TRAILER</h3>
                    <div class="gallery">
                        <iframe th:src="${film.trailer} + '?autoplay=1&mute=1'">
                        </iframe>
                    </div>
                </div>
                </div>
            </div>
            <!-- end movie-card -->
        <!-- </div> --> <form th:action="@{/gestionFilm/save}" th:object="${film}"
                              method="post" style="max-width: 600px; margin: 0 auto;">
        </form>
        </form>
    </main>
    <br>
    <div class="comments-section">
        <div class="comments">
            <h3>COMENTARIOS</h3>
            <div id="comments-container">

                <div th:if="${#authentication.getPrincipal() == 'anonymousUser'}" style="color:BLACK;"><p>Registratr o login</p></div>

                    <form th:unless="${#authentication.getPrincipal() == 'anonymousUser'}" th:action="@{'/filmInfo/save/' + ${film.id}}"  th:object="${comment}" method="post" >
                        <div class="comment">
                            <div class="comment-user">
                                <div class="avatar">
                                    <img th:if="${#authentication.getPrincipal().getPhoto == null}"  th:src="@{/img/user.png}" />
                                    <img th:unless="${#authentication.getPrincipal().getPhoto == null}" th:src="@{'/imgUser/'+ ${#authentication.getPrincipal().getPhoto}}"/>
                                </div>
                                <span class="user-details">
                                    <span class="username" th:text="${#authentication.getPrincipal().getUserName()}"></span><span> on </span><span th:text="${'2022-11-11'}"></span></span>
                            </div>
                            <div class="comment-text">
                                <textarea name ="text" th:field="${comment.content}" class="section text" placeholder="Escribe aquí, tu comentario u opinion sobre la película..."></textarea>
                                <input type="hidden" name="id"  th:value="${comment.id}">
                                <input type="hidden" name="film"  th:value="${film.id}">
                                <input type="hidden" name="user" th:value="${#authentication.getPrincipal().id}">
                            </div>
                            <div class="submit">
                                <button type="submit" value="Submit">Añadir Comentario</button>
                            </div>
                        </div>

                    </form>



                <div class="comment" th:each="comment : ${listComments}">
                    <div class="comment-user">
                        <div class="avatar">
                            <img th:if="${comment.user.getPhoto() == null}"  th:src="@{/img/user.png}" />
                            <img th:unless="${comment.user.getPhoto() == null}" th:src="@{'/imgUser/'+ ${comment.user.getPhoto()}}"/>

                        </div>
                        <span class="user-details">
                        <span class="username" th:text="${comment.user.userName}"></span><span> on </span><span th:text="${comment.creation}"></span></span>
                    </div>
                    <div class="comment-text" th:text="${comment.content}">

                    </div>
                </div>


                <div class="comment">
                    <div class="comment-user">
                        <div class="avatar"><img src="https://i.pinimg.com/564x/58/6a/87/586a8788cd417189821cc7e40166dd04.jpg" alt="Riccardo"/></div><span class="user-details"><span class="username">Riccardo </span><span>on </span><span>MARCH 7, 2016</span></span>
                    </div>
                    <div class="comment-text">
                        "Draft.js is a framework for building rich text editors in React, powered by an immutable model and abstracting over cross-browser differences."<br><br>
                        <a href="https://facebook.github.io/draft-js/">Draft.js</a> home page.
                    </div>
                </div>
                <div class="comment">
                    <div class="comment-user">
                        <div class="avatar"><img src="//s3-us-west-2.amazonaws.com/s.cdpn.io/49366/profile/profile-80_1.jpg" alt="Riccardo"/></div><span class="user-details"><span class="username">Riccardo </span><span>on </span><span>MARCH 7, 2016</span></span>
                    </div>
                    <div class="comment-text">
                        This demo demonstrate a basic implementation of <strong>Draft.js</strong>
                        It's a powerfoul React framework. You can try styling your comment with the pleasure of see the effects live instead of the guard characters of markdown.
                        Watch the official presentation at the React.js Conf 2016. <a href="https://www.youtube.com/watch?v=feUYwoLhE_4">WATCH!!</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>
